$(document).ready(function () { if ($("#shrop-menu").length > 0) $("#shrop-menu").load("https://shropshire.gov.uk/menu-html", function () { function e(e) { $(e).removeClass("hidden") } function t(e) { $(e).addClass("hidden") } $("#menu").click(function (e) { e.stopPropagation(), $("#menu").hasClass("closed") ? $(this).removeClass("closed").addClass("open") : $("#menu").hasClass("open") && $(this).removeClass("open").addClass("closed"), $("#menu-dropdown").slideToggle() }), $(document).click(function (e) { 0 === $(e.target).closest("#menu-dropdown").length && $("#menu").hasClass("open") && ($("#menu").removeClass("open").addClass("closed"), $("#menu-dropdown").slideUp("fast")) }), $("body").keyup(function (e) { if (27 === e.which) return $("#menu").hasClass("open") && $("#menu").removeClass("open").addClass("closed"), $("#menu-dropdown").is(":visible") && $("#menu-dropdown").slideUp("fast"), !1 }), $(window).width() <= 640 && t($("#back-button")), $("#back-button").click(function (i) { e($("#menu-category li")), t($("#menu-service-area li")), t($(this)), $(this).removeAttr("href"), t($("#menu-content li")), $("#menu-dropdown li").removeClass("active") }), $(window).resize(function () { var a = $(window).width(); a <= 640 ? ($("#menu-category li").unbind("click"), $("#menu-service-area li").unbind("click"), $("#menu-category li").each(function () { $(this).click(function (a) { if ($(this).index(), e($("#back-button")), $("#back-button").attr("href", "#"), t($("#menu-content li")), $("#menu-service-area li a").attr("tabindex", -1), $("#menu-content li a").attr("tabindex", -1), $("#menu-service-area li.menu-service-area a").removeAttr("href"), a.target.id !== $(this).attr("id")) { e($("#menu-service-area li")), t($("#menu-category li").not($(this))), $("#menu-service-area li").removeClass("active"), $("#menu-category li").removeClass("active"); var n = $(this).attr("class").toString().split(" "), s = []; $("#menu-service-area li").each(function (a) { for (i = 0; i < n.length; i++)$(this).hasClass(n[i]) ? (e($(this)), $("a", this).attr("tabindex", 0), $("a.internal", this).attr("href", "#"), s.push(a), a === s[0] && $("a", this).focus()) : (t($(this)), $("a.internal", this).removeAttr("href"), $("a", this).removeAttr("tabindex"), $("a.external", this).attr("tabindex", -1)) }), $(this).addClass("active") } }) }), $("#menu-service-area li").each(function () { $(this).click(function (a) { if (a.target.id !== $(this).attr("id")) { $("#menu-content li a").attr("tabindex", -1), t($("#menu-service-area li").not($(this))), $("#menu-service-area li").removeClass("active"); var n = $(this).attr("class").toString().split(" "), s = []; $("#menu-content li").each(function (a) { for (i = 0; i < n.length; i++)$(this).hasClass(n[i]) ? (e($(this)), $("a", this).attr("tabindex", 0), s.push(a), a === s[0] && $("a", this).focus()) : (t($(this)), $("a", this).attr("tabindex", -1)) }), $(this).addClass("active") } }) })) : a > 640 && ($("#menu-category li").unbind("click"), $("#menu-service-area li").unbind("click"), t($("#back-button")), e($("#menu-category li")), $("#menu-category li").each(function () { $(this).click(function (a) { if ($(this).index(), t($("#menu-content li")), $("#menu-service-area li a").attr("tabindex", -1), $("#menu-content li a").attr("tabindex", -1), $("#menu-service-area li.menu-service-area a").removeAttr("href"), a.target.id !== $(this).attr("id")) { $("#menu-service-area li").removeClass("active"), $("#menu-category li").removeClass("active"); var n = $(this).attr("class").toString().split(" "), s = []; $("#menu-service-area li").each(function (a) { for (i = 0; i < n.length; i++)$(this).hasClass(n[i]) ? (e($(this)), $("a", this).attr("tabindex", 0), $("a.internal", this).attr("href", "#"), s.push(a), a === s[0] && $("a", this).focus()) : (t($(this)), $("a.internal", this).removeAttr("href"), $("a", this).removeAttr("tabindex"), $("a.external", this).attr("tabindex", -1)) }), $(this).addClass("active") } }) }), $("#menu-service-area li").each(function () { $(this).click(function (a) { if ($("#menu-content li a").attr("tabindex", -1), a.target.id !== $(this).attr("id")) { $("#menu-service-area li").removeClass("active"); var n = $(this).attr("class").toString().split(" "), s = []; $("#menu-content li").each(function (a) { for (i = 0; i < n.length; i++)$(this).hasClass(n[i]) ? (e($(this)), $("a", this).attr("tabindex", 0), s.push(a), a === s[0] && $("a", this).focus()) : (t($(this)), $("a", this).attr("tabindex", -1)) }), $(this).addClass("active") } }) })) }).resize() }); else if ($("div#navbar-wrapper").length > 0) { function e(e) { $(e).removeClass("hidden") } function t(e) { $(e).addClass("hidden") } $("#menu").click(function (e) { e.stopPropagation(), $("#menu").hasClass("closed") ? $(this).removeClass("closed").addClass("open") : $("#menu").hasClass("open") && $(this).removeClass("open").addClass("closed"), $("#menu-dropdown").slideToggle() }), $(document).click(function (e) { 0 === $(e.target).closest("#menu-dropdown").length && $("#menu").hasClass("open") && ($("#menu").removeClass("open").addClass("closed"), $("#menu-dropdown").slideUp("fast")) }), $("body").keyup(function (e) { if (27 === e.which) return $("#menu").hasClass("open") && $("#menu").removeClass("open").addClass("closed"), $("#menu-dropdown").is(":visible") && $("#menu-dropdown").slideUp("fast"), !1 }), $(window).width() <= 640 && t($("#back-button")), $("#back-button").click(function (i) { e($("#menu-category li")), t($("#menu-service-area li")), t($(this)), $(this).removeAttr("href"), t($("#menu-content li")), $("#menu-dropdown li").removeClass("active") }), $(window).resize(function () { var a = $(window).width(); a <= 640 ? ($("#menu-category li").unbind("click"), $("#menu-service-area li").unbind("click"), $("#menu-category li").each(function () { $(this).click(function (a) { if ($(this).index(), e($("#back-button")), $("#back-button").attr("href", "#"), t($("#menu-content li")), $("#menu-service-area li a").attr("tabindex", -1), $("#menu-content li a").attr("tabindex", -1), $("#menu-service-area li.menu-service-area a").removeAttr("href"), a.target.id !== $(this).attr("id")) { e($("#menu-service-area li")), t($("#menu-category li").not($(this))), $("#menu-service-area li").removeClass("active"), $("#menu-category li").removeClass("active"); var n = $(this).attr("class").toString().split(" "), s = []; $("#menu-service-area li").each(function (a) { for (i = 0; i < n.length; i++)$(this).hasClass(n[i]) ? (e($(this)), $("a", this).attr("tabindex", 0), $("a.internal", this).attr("href", "#"), s.push(a), a === s[0] && $("a", this).focus()) : (t($(this)), $("a.internal", this).removeAttr("href"), $("a", this).removeAttr("tabindex"), $("a.external", this).attr("tabindex", -1)) }), $(this).addClass("active") } }) }), $("#menu-service-area li").each(function () { $(this).click(function (a) { if (a.target.id !== $(this).attr("id")) { $("#menu-content li a").attr("tabindex", -1), t($("#menu-service-area li").not($(this))), $("#menu-service-area li").removeClass("active"); var n = $(this).attr("class").toString().split(" "), s = []; $("#menu-content li").each(function (a) { for (i = 0; i < n.length; i++)$(this).hasClass(n[i]) ? (e($(this)), $("a", this).attr("tabindex", 0), s.push(a), a === s[0] && $("a", this).focus()) : (t($(this)), $("a", this).attr("tabindex", -1)) }), $(this).addClass("active") } }) })) : a > 640 && ($("#menu-category li").unbind("click"), $("#menu-service-area li").unbind("click"), t($("#back-button")), e($("#menu-category li")), $("#menu-category li").each(function () { $(this).click(function (a) { if ($(this).index(), t($("#menu-content li")), $("#menu-service-area li a").attr("tabindex", -1), $("#menu-content li a").attr("tabindex", -1), $("#menu-service-area li.menu-service-area a").removeAttr("href"), a.target.id !== $(this).attr("id")) { $("#menu-service-area li").removeClass("active"), $("#menu-category li").removeClass("active"); var n = $(this).attr("class").toString().split(" "), s = []; $("#menu-service-area li").each(function (a) { for (i = 0; i < n.length; i++)$(this).hasClass(n[i]) ? (e($(this)), $("a", this).attr("tabindex", 0), $("a.internal", this).attr("href", "#"), s.push(a), a === s[0] && $("a", this).focus()) : (t($(this)), $("a.internal", this).removeAttr("href"), $("a", this).removeAttr("tabindex"), $("a.external", this).attr("tabindex", -1)) }), $(this).addClass("active") } }) }), $("#menu-service-area li").each(function () { $(this).click(function (a) { if ($("#menu-content li a").attr("tabindex", -1), a.target.id !== $(this).attr("id")) { $("#menu-service-area li").removeClass("active"); var n = $(this).attr("class").toString().split(" "), s = []; $("#menu-content li").each(function (a) { for (i = 0; i < n.length; i++)$(this).hasClass(n[i]) ? (e($(this)), $("a", this).attr("tabindex", 0), s.push(a), a === s[0] && $("a", this).focus()) : (t($(this)), $("a", this).attr("tabindex", -1)) }), $(this).addClass("active") } }) })) }).resize() } });